---
import type { MediaAnimatedGif, MediaVideo } from "./api.ts";
import { getMediaUrl, getMp4Video } from "./api.ts";

interface Props {
	media: MediaAnimatedGif | MediaVideo;
}

const { media } = Astro.props;
const mp4 = getMp4Video(media);
---

{
	mp4 && (
		<video
			class="tweet-media-video"
			poster={getMediaUrl(media, "small")}
			controls
			playsinline
			preload="none"
			muted={media.type === "animated_gif"}
			loop={media.type === "animated_gif"}
		>
			<source src={mp4.url} type={mp4.content_type} />
		</video>
	)
}
